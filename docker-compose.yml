services:
  redeployment-service:
    build: .
    ports:
      - "3000:3000"  # Expose port 3000 directly
    volumes:
      # Mount SSH keys for GitHub access
      - ~/.ssh:/root/.ssh:ro
      # Mount apps directory
      - ~/apps:/apps:rw
      # Mount Docker socket for Docker operations
      - /var/run/docker.sock:/var/run/docker.sock:ro
    environment:
      - NODE_ENV=production
    env_file:
      - .env
    restart: unless-stopped
